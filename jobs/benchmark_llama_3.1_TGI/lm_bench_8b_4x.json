{
  "version": "0.1",
  "type": "container",
  "meta": {
    "trigger": "cli"
  },
  "ops": [
    {
      "type": "container/run",
      "id": "TGI-llama3.1",
      "args": {
        "entrypoint": [],
        "cmd": [
          "/bin/bash",
          "-c",
          "text-generation-launcher --model-id /root/.cache/huggingface/hub/models--hugging-quants--Meta-Llama-3.1-8B-Instruct-AWQ-INT4/snapshots/db1f81ad4b8c7e39777509fac66c652eb0a52f91 --quantize awq --port 8080 > /dev/null & sleep 2m & echo \"Running lm-benchmark...\" & bench --benchmark llm --url http://localhost:8080 --ping_correction --job-length 10 --model llama3.1_8B_4x --timeout 5 --llm-framework tgi"
        ],
        "image": "docker.io/nosana/llm_benchmark-tgi:0.0.1",
        "gpu": true,
        "env": {
          "HF_HOME": "/root/.cache/huggingface/",
          "TRANSFORMERS_CACHE": "/root/.cache/huggingface/"
        },
        "resources": [
          {
            "type": "S3",
            "url": "https://models.nosana.io/hugging-face/llama3.1/8b/4x/models--hugging-quants--Meta-Llama-3.1-8B-Instruct-AWQ-INT4",
            "target": "/root/.cache/huggingface/hub/models--hugging-quants--Meta-Llama-3.1-8B-Instruct-AWQ-INT4"
          }
        ]
      },
      "results": {
        "results_CU_100": "(?<=100 CU: ).*",
        "results_CU_50": "(?<=50 CU: ).*",
        "results_CU_10": "(?<=10 CU: ).*",
        "results_CU_5": "(?<=5 CU: ).*",
        "results_CU_1": "(?<=1 CU: ).*",
        "system_specs": "(?<=system specs: ).*"
      }
    }
  ]
}
