{
  "version": "0.1",
  "type": "container",
  "meta": {
    "trigger": "cli"
  },
  "ops": [
    {
      "type": "container/run",
      "id": "lm-benchmark-llama3.1",
      "args": {
        "cmd": [
          "/bin/sh", "-c", 
          "echo \"Starting lmdeploy service...\"; lmdeploy serve api_server ../../root/snapshots/2123003760781134cfc31124aa6560a45b491fdf --model-name llama3.1 --chat-template /chat_template.json --model-format awq > /dev/null & sleep 30; echo \"Running lm-benchmark...\"; lm-benchmark --url http://localhost:23333 --ping_correction --job_length 10"
        ],
        "image": "docker.io/nosana/llm_benchmark-lmdeploy:0.0.3",
        "gpu": true,
        "expose": 23333,
        "env": {
          "HF_HOME": "/root/.cache/huggingface/",
          "TRANSFORMERS_CACHE": "/root/.cache/huggingface/"
        },
        "resources": [
          {
            "type": "S3",
            "url": "s3://nos-ai-models-qllsn32u/hugging-face/llama3.1/70b/4x/models--hugging-quants--Meta-Llama-3.1-70B-Instruct-AWQ-INT4",
            "target": "/root/"
          }
        ]
      }
    }
  ]
}
