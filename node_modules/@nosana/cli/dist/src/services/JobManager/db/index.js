import fs from 'fs';
import os from 'os';
import { JSONFileSyncPreset } from 'lowdb/node';
const initial_state = {
    jobs: {},
};
export class JobDB {
    constructor(configLocation) {
        if (configLocation[0] === '~') {
            configLocation = configLocation.replace('~', os.homedir());
        }
        fs.mkdirSync(configLocation, { recursive: true });
        this.db = JSONFileSyncPreset(`${configLocation}/nosana_job_db.json`, initial_state);
        if (!this.db.data.jobs) {
            this.db.data.jobs = initial_state.jobs;
        }
        this.db.write();
    }
}
